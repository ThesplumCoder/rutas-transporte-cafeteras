---
title: "Exploración de los datos de producción agrícola"
output:
  html_document:
    toc: yes
    df_print: paged
---

# Tratamiento de los datos originales
Importamos los datos desde los archivos:
```{r}
eva_2007_2018 <- read.csv("datasets/evaluaciones-agropecuarias-municipales_2007-2018.csv")
#eva_2019_2022 <- read.csv("datasets/evaluaciones-agropecuarias-municipales_2019-2022.csv")
```

Resúmen de cada una de las columnas  de los conjuntos de datos:
```{r}
summary(eva_2007_2018)
#summary(eva_2019_2022)
```

Como son muchas columnas, retiramos las columnas que no vamos a usar, nos 
quedamos con las que vamos a utilizar:
```{r}
eva_2007_2018 <- subset(eva_2007_2018, select = c("DEPARTAMENTO", "MUNICIPIO", "CULTIVO", "AÑO", "Producción..t."))
```


Vista previa a cada uno de los *dataframes*:
```{r}
head(eva_2007_2018)
#head(eva_2019_2022)
```

# Exploración

Miramos cuáles son los cultivos que tienen más apariciones en los registros. 
Limitamos el gráfico a los 10 más presentes:
```{r}
crops_presence <- sort(table(eva_2007_2018$CULTIVO), decreasing = TRUE)

barplot(crops_presence[1:10], 
        ylim = c(0, 30000), 
        col = rainbow(10), 
        las = 3, 
        main = "Presencia de registros para cada cultivo en el país",
        xlab = "Cultivo",
        ylab = "Cantidad de registros")
```

Elegido el café como cultivo de interés, podemos dar un vistazo a los 
departamentos que tienen más municipios productores en promedio, a través de los 
años:
```{r}
coffee_producers <- subset(eva_2007_2018, CULTIVO == "CAFE")
years_range <- 11
departments_presence <- sort(table(coffee_producers$DEPARTAMENTO) / years_range, decreasing = TRUE)

barplot(departments_presence, 
        ylim = c(0, 100), 
        col = rainbow(32), 
        las = 3, 
        xpd = TRUE, 
        main = "Municipios productores",
        xlab = "Departamento",
        ylab = "Media de municipios")
```

Como Antioquia es el departamento con más presente como productor de café a 
través de los años, observamos su tendencia de producción. Esto con el fin de 
poder modelar la función de producción, que nos servirá para la simulación.
```{r}
antioquia_coffee <- subset(coffee_producers, DEPARTAMENTO == "ANTIOQUIA")

production_2018 <- subset(antioquia_coffee, AÑO == 2018)
plot(production_2018$Producción..t.)
```


